<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”¥ YSYå’Œå¥¹çš„å¥½æœ‹å‹ä»¬çš„çŸ³å¤´å‰ªåˆ€å¸ƒç‹è€…å¯¹å†³ ğŸ”¥</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        /* æ ¸å¿ƒé…è‰² */
        :root {
            --bg-dark: #1a1a2e; /* æ·±é‚ƒèƒŒæ™¯ */
            --bg-light: #2c2c54; /* æ¨¡å—èƒŒæ™¯ */
            --text-light: #ffffff;
            --accent-green: #00f0b8; /* ç§‘æŠ€ç»¿ */
            --accent-orange: #ff5722;
            --accent-blue: #4af5ff; /* éœ“è™¹è“ */
        }

        body {
            font-family: 'Montserrat', sans-serif;
            padding: 20px;
            background-color: var(--bg-dark);
            color: var(--text-light);
            line-height: 1.6;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
            /* å¢åŠ èƒŒæ™¯çº¹ç†æ•ˆæœ */
            background-image: radial-gradient(circle at center, rgba(74, 245, 255, 0.05) 1px, transparent 1px);
            background-size: 40px 40px;
        }
        .container {
            max-width: 1400px;
            width: 100%;
            background: var(--bg-light);
            padding: 30px;
            border-radius: 20px;
            /* å¢åŠ äº®è‰²è¾¹æ¡†å’ŒæŸ”å’Œé˜´å½± */
            box-shadow: 0 0 30px rgba(0, 240, 184, 0.3), 0 8px 20px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column; 
            gap: 30px;
        }
        
        /* å±…ä¸­å¤§æ ‡é¢˜æ ·å¼ */
        .main-header {
            text-align: center;
            color: var(--accent-orange); 
            text-shadow: 0 0 10px rgba(255, 87, 34, 0.7); /* éœ“è™¹å‘å…‰æ•ˆæœ */
            border-bottom: 3px solid var(--accent-green);
            padding-bottom: 20px;
            margin-bottom: 30px;
            font-size: 3em; /* å¢å¤§æ ‡é¢˜ */
            font-weight: 900;
            letter-spacing: 2px;
        }

        h3 {
            color: var(--accent-green);
            font-weight: 700;
            margin-top: 25px;
            border-left: 6px solid var(--accent-green);
            padding-left: 15px;
            font-size: 1.6em;
            text-shadow: 0 0 5px rgba(0, 240, 184, 0.5);
        }
        .section {
            background: rgba(0, 0, 0, 0.3); /* åŠé€æ˜æ·±è‰²èƒŒæ™¯ */
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(0, 240, 184, 0.2);
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
            margin-bottom: 20px;
        }

        /* PCç«¯å¸ƒå±€ï¼ˆé»˜è®¤ Flex å¸ƒå±€ï¼‰ */
        .content-area {
            display: flex;
            gap: 30px;
            width: 100%;
        }

        .player-control-section {
            flex: 0 0 300px; 
        }
        .right-panel {
            flex: 1; 
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .game-area {
            display: flex;
            gap: 20px;
        }
        .game-controls, .game-results {
            flex: 1;
            border: 1px solid rgba(74, 245, 255, 0.3);
            padding: 20px;
            border-radius: 12px;
            background-color: var(--bg-light);
            box-shadow: 0 0 10px rgba(74, 245, 255, 0.1);
        }
        .ranking-panel {
            width: 100%;
            display: flex;
            gap: 20px;
        }
        .rank-column {
            flex: 1;
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 12px;
            background-color: var(--bg-light);
            box-shadow: 0 0 10px rgba(255, 87, 34, 0.1);
        }

        /* è¡¨å•å…ƒç´ æ ·å¼ */
        input[type="text"] {
            padding: 12px;
            border: 1px solid var(--accent-blue);
            border-radius: 8px;
            width: calc(100% - 24px);
            margin-bottom: 15px;
            font-size: 1em;
            background-color: rgba(0, 0, 0, 0.5);
            color: var(--text-light);
            box-shadow: inset 0 0 5px rgba(74, 245, 255, 0.5);
        }
        
        /* æŒ‰é’®é€šç”¨æ ·å¼ */
        button {
            padding: 10px 20px;
            font-size: 1em;
            cursor: pointer;
            border: none;
            border-radius: 6px;
            transition: background-color 0.3s ease, transform 0.1s ease, box-shadow 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
            font-weight: bold;
        }
        button:hover { transform: translateY(-2px); }
        
        /* æŒ‰é’®é¢œè‰² */
        #add-player-btn { 
            background-color: var(--accent-orange); 
            color: var(--text-light); 
            box-shadow: 0 0 10px rgba(255, 87, 34, 0.5);
        }
        #add-player-btn:hover { 
            background-color: #e54b1d; 
            box-shadow: 0 0 15px rgba(255, 87, 34, 0.8);
        }
        #clear-players-btn { 
            background-color: #c0392b; 
            color: var(--text-light); 
        }
        #clear-players-btn:hover { background-color: #a33124; }

        /* ç©å®¶åˆ—è¡¨ */
        #players-list label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-size: 1.1em;
            cursor: pointer;
            padding: 10px 12px;
            background-color: rgba(0, 240, 184, 0.1);
            border-radius: 6px;
            transition: background-color 0.2s;
            border-left: 3px solid var(--accent-green);
        }
        #players-list label:hover { background-color: rgba(0, 240, 184, 0.2); }
        #players-list .player-score { font-size: 0.9em; color: var(--accent-green); font-weight: bold; }
        
        /* æ´»è·ƒç©å®¶é€‰æ‹© */
        #active-players-selection label {
            display: inline-block;
            margin-right: 12px;
            margin-bottom: 10px;
            padding: 8px 12px;
            background-color: rgba(74, 245, 255, 0.2);
            border-radius: 6px;
            cursor: pointer;
            color: var(--accent-blue);
            font-weight: 700;
        }

        /* æ ¸å¿ƒæ¸¸æˆæŒ‰é’® */
        #play-btn {
            background-color: var(--accent-green);
            color: var(--bg-dark);
            font-size: 1.4em;
            padding: 18px 30px;
            width: calc(100% - 20px);
            margin-top: 20px;
            margin-right: 0;
            box-shadow: 0 0 20px rgba(0, 240, 184, 0.7);
        }
        #play-btn:hover { 
            background-color: #00d4a0;
            box-shadow: 0 0 30px rgba(0, 240, 184, 1); 
        }

        /* ç»“æœæ˜¾ç¤º */
        .round-result {
            border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
            padding-bottom: 15px;
            margin-bottom: 15px;
        }
        .player-move { font-size: 1.1em; margin-bottom: 5px; color: #ccc; }
        .winner { color: var(--accent-green); font-weight: bold; }
        .loser { color: #ff5722; font-weight: bold; }
        .draw { color: var(--accent-blue); font-weight: bold; }
        .emoji-big {
            font-size: 2em; /* å¢å¤§æ‹³å¤´å›¾æ ‡ */
            vertical-align: middle;
            margin-left: 8px;
        }
        
        /* æ’åæ¦œå• */
        .ranking-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px dotted rgba(255, 255, 255, 0.1);
            font-size: 1.1em;
        }
        .rank-title {
            font-weight: bold;
            font-size: 1.3em;
            color: var(--accent-blue);
            margin-top: 0;
            margin-bottom: 15px;
            text-align: center;
            background-color: rgba(74, 245, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
            text-shadow: 0 0 5px rgba(74, 245, 255, 0.5);
        }
        .rank-name { color: var(--text-light); }
        .rank-score { font-weight: bold; color: var(--accent-green); }
        .no-players-message, .no-rank-message {
            color: #999;
            font-style: italic;
            text-align: center;
            margin-top: 10px;
        }

        /* ==================================== */
        /* ğŸ“± åª’ä½“æŸ¥è¯¢ï¼šé€‚é…æ‰‹æœºå’Œå°å°ºå¯¸å±å¹• */
        /* ==================================== */
        @media screen and (max-width: 768px) {
            .container {
                padding: 15px;
                gap: 15px;
            }
            
            /* 1. æ ¸å¿ƒå¸ƒå±€æ”¹ä¸ºå‚ç›´å †å  */
            .content-area {
                flex-direction: column;
                gap: 20px;
            }

            .player-control-section {
                flex: none; /* ç§»é™¤å›ºå®šå®½åº¦é™åˆ¶ */
                width: 100%;
            }

            .game-area {
                flex-direction: column;
                gap: 20px;
            }

            /* 2. æ’è¡Œæ¦œæ”¹ä¸ºå‚ç›´å †å  */
            .ranking-panel {
                flex-direction: column;
                gap: 20px;
            }

            .rank-column {
                width: 100%;
                padding: 15px;
            }

            /* 3. å­—ä½“å’Œå†…è¾¹è·å¾®è°ƒ */
            .main-header {
                font-size: 2em;
                padding-bottom: 10px;
                margin-bottom: 20px;
            }
            h3 {
                font-size: 1.4em;
                margin-top: 15px;
            }
            .section {
                padding: 15px;
            }
            #play-btn {
                font-size: 1.2em;
                padding: 15px 20px;
            }
        }
    </style>
</head>
<body>

<div class="container">
    
    <h2 class="main-header">ğŸ”¥ YSYå’Œå¥¹çš„å¥½æœ‹å‹ä»¬çš„çŸ³å¤´å‰ªåˆ€å¸ƒç‹è€…å¯¹å†³ ğŸ”¥</h2>

    <div class="content-area">
        <div class="player-control-section">
            <div class="section">
                <h3>ğŸ‘¥ ç©å®¶ç®¡ç†</h3>
                <input type="text" id="player-name-input" placeholder="è¾“å…¥ç©å®¶å§“å">
                <button id="add-player-btn" onclick="addPlayer()">æ·»åŠ ç©å®¶</button>
                <button id="clear-players-btn" onclick="clearAllPlayers()">æ¸…ç©ºæ‰€æœ‰ç©å®¶</button>
                <div id="players-list" style="margin-top: 15px;">
                    <p class="no-players-message">è¯·æ·»åŠ ç©å®¶</p>
                </div>
            </div>
        </div>

        <div class="right-panel">
            <div class="game-area">
                <div class="game-controls">
                    <h3>ğŸ•¹ï¸ æ¸¸æˆæ§åˆ¶</h3>
                    <p style="color: #ccc;">å‹¾é€‰è¦å‚ä¸æœ¬å±€å¯¹å†³çš„ç©å®¶ï¼š</p>
                    <div id="active-players-selection">
                        <p class="no-players-message">è¯·å…ˆæ·»åŠ ç©å®¶</p>
                    </div>
                    <button id="play-btn" onclick="playRound()">çŸ³å¤´å‰ªåˆ€å¸ƒï¼</button>
                </div>

                <div class="game-results">
                    <h3>ğŸ“ å¯¹å†³ç»“æœ</h3>
                    <div id="current-round-result">
                        <p class="no-players-message">ç‚¹å‡»â€œçŸ³å¤´å‰ªåˆ€å¸ƒï¼â€å¼€å§‹å¯¹å†³</p>
                    </div>
                </div>
            </div>

            <div class="ranking-panel">
                <div class="rank-column">
                    <div class="rank-title">ğŸ¥‡ æ€»ç‹è€…æ¦œ (èƒœåœºæœ€å¤š)</div>
                    <div id="winner-ranking">
                        <p class="no-rank-message">æš‚æ— æ’å</p>
                    </div>
                </div>
                <div class="rank-column">
                    <div class="rank-title">ğŸ¤¡ æ€»å†¤ç§æ¦œ (è´¥åœºæœ€å¤š)</div>
                    <div id="loser-ranking">
                        <p class="no-rank-message">æš‚æ— æ’å</p>
                    </div>
                </div>
                 <div class="rank-column">
                    <div class="rank-title">ğŸ”¥ è¿èƒœç‹ (è¿ç»­èƒœåœº)</div>
                    <div id="streak-winner-ranking">
                        <p class="no-rank-message">æš‚æ— æ’å</p>
                    </div>
                </div>
                <div class="rank-column">
                    <div class="rank-title">ğŸ¥¶ è¿è´¥ç‹ (è¿ç»­è´¥åœº)</div>
                    <div id="streak-loser-ranking">
                        <p class="no-rank-message">æš‚æ— æ’å</p>
                    </div>
                </div>
            </div>
            
            <div class="game-history section">
                <h3>ğŸ“œ å›åˆè®°å½• (æœ€è¿‘ 5 å±€)</h3>
                <div id="round-history">
                    <p class="no-players-message">æ— å†å²è®°å½•</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const MOVES = {
        ROCK: { name: 'çŸ³å¤´', emoji: 'ğŸª¨' },
        PAPER: { name: 'å¸ƒ', emoji: 'ğŸ“„' },
        SCISSORS: { name: 'å‰ªåˆ€', emoji: 'âœ‚ï¸' }
    };
    
    const playerScores = {}; 
    let allPlayerNames = [];
    let roundHistory = []; 

    // --- ç©å®¶ç®¡ç† ---
    function addPlayer() {
        const input = document.getElementById('player-name-input');
        let playerName = input.value.trim();

        if (!playerName || allPlayerNames.includes(playerName)) {
            alert(playerName ? 'è¯¥ç©å®¶å·²å­˜åœ¨ï¼' : 'è¯·è¾“å…¥ç©å®¶å§“åï¼');
            return;
        }

        allPlayerNames.push(playerName);
        playerScores[playerName] = { wins: 0, losses: 0, draws: 0, winStreak: 0, loseStreak: 0, totalGames: 0 };
        input.value = '';
        
        updatePlayersList();
        updateActivePlayersSelection();
        updateRankings();
    }

    function removePlayer(nameToRemove) {
        allPlayerNames = allPlayerNames.filter(name => name !== nameToRemove);
        delete playerScores[nameToRemove];
        updatePlayersList();
        updateActivePlayersSelection();
        updateRankings();
    }
    
    function clearAllPlayers() {
        if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰ç©å®¶ã€åˆ†æ•°å’Œå†å²è®°å½•å—ï¼Ÿ')) {
            allPlayerNames = [];
            roundHistory = [];
            for (const key in playerScores) { delete playerScores[key]; }
            updatePlayersList();
            updateActivePlayersSelection();
            updateRankings();
            document.getElementById('current-round-result').innerHTML = '<p class="no-players-message">ç‚¹å‡»â€œçŸ³å¤´å‰ªåˆ€å¸ƒï¼â€å¼€å§‹å¯¹å†³</p>';
        }
    }

    function updatePlayersList() {
        const listDiv = document.getElementById('players-list');
        if (allPlayerNames.length === 0) {
            listDiv.innerHTML = '<p class="no-players-message">è¯·æ·»åŠ ç©å®¶</p>';
            return;
        }
        listDiv.innerHTML = allPlayerNames.map(name => `
            <label>
                <span>${name}</span>
                <span class="player-score">W:${playerScores[name].wins} L:${playerScores[name].losses}</span>
                <button onclick="event.stopPropagation(); removePlayer('${name}')">åˆ é™¤</button>
            </label>
        `).join('');
    }

    function updateActivePlayersSelection() {
        const selectionDiv = document.getElementById('active-players-selection');
        if (allPlayerNames.length === 0) {
            selectionDiv.innerHTML = '<p class="no-players-message">è¯·å…ˆæ·»åŠ ç©å®¶</p>';
            return;
        }
        selectionDiv.innerHTML = allPlayerNames.map(name => `
            <label style="background-color: rgba(74, 245, 255, 0.2); color: var(--accent-blue);">
                <input type="checkbox" value="${name}" checked> ${name}
            </label>
        `).join('');
    }

    // --- æ¸¸æˆé€»è¾‘ ---
    function getRandomMove() {
        const moves = Object.values(MOVES);
        const randomIndex = Math.floor(Math.random() * moves.length);
        return moves[randomIndex];
    }

    // æ ¸å¿ƒåˆ¤å®šå‡½æ•°ï¼šmove1 ç›¸å¯¹äº move2 çš„ç»“æœ
    function getResult(move1, move2) {
        if (move1 === move2) return 'draw';
        if (
            (move1 === MOVES.ROCK && move2 === MOVES.SCISSORS) ||
            (move1 === MOVES.PAPER && move2 === MOVES.ROCK) ||
            (move1 === MOVES.SCISSORS && move2 === MOVES.PAPER)
        ) {
            return 'win';
        }
        return 'lose';
    }

    function playRound() {
        const activeCheckboxes = document.querySelectorAll('#active-players-selection input[type="checkbox"]:checked');
        if (activeCheckboxes.length < 2) {
            alert('è¯·è‡³å°‘é€‰æ‹©ä¸¤ä½ç©å®¶è¿›è¡Œå¯¹å†³ï¼');
            return;
        }

        const players = Array.from(activeCheckboxes).map(cb => cb.value); 
        const playerMoves = {};
        const outcome = { winner: [], loser: [], draw: [] }; 
        
        // 1. ç”Ÿæˆæ‰€æœ‰ç©å®¶çš„å‡ºæ‹³
        let allMoves = [];
        players.forEach(name => {
            playerMoves[name] = getRandomMove();
            allMoves.push(playerMoves[name]);
        });
        
        const movesSet = new Set(allMoves.map(m => m.name));
        
        // 2. åˆ¤æ–­å½“å±€ç»“æœ
        if (movesSet.size === 1 || movesSet.size === 3) {
            // åªæœ‰ä¸€ç§æ‹³ï¼ˆå¹³å±€ï¼‰æˆ–ä¸‰ç§æ‹³ï¼ˆå¤§å¹³å±€ï¼‰
            outcome.draw = players;
        } else {
            // åªæœ‰ä¸¤ç§æ‹³ï¼Œå­˜åœ¨èƒœè´Ÿæ–¹
            const movesArr = Array.from(movesSet); 
            
            // ç¡®å®š winningMoveName å’Œ losingMoveName
            const moveName1 = movesArr[0];
            const moveName2 = movesArr[1];
            
            // æ‰¾åˆ° MOVE å¯¹è±¡
            const move1 = Object.values(MOVES).find(m => m.name === moveName1);
            const move2 = Object.values(MOVES).find(m => m.name === moveName2);

            let winningMoveName;
            if (getResult(move1, move2) === 'win') {
                winningMoveName = moveName1;
            } else {
                winningMoveName = moveName2;
            }
            const losingMoveName = movesArr.find(name => name !== winningMoveName);


            // 3. æ ¸å¿ƒï¼šæ ¹æ®å‡ºæ‹³ç»“æœï¼Œ**ç²¾ç¡®**åˆ†é…èƒœè´Ÿ
            players.forEach(name => {
                const move = playerMoves[name];
                if (move.name === winningMoveName) {
                    outcome.winner.push(name);
                } else if (move.name === losingMoveName) {
                    outcome.loser.push(name);
                }
            });
        }
        
        // 4. æ›´æ–°åˆ†æ•°å’Œè¿èƒœ/è¿è´¥è®°å½•
        players.forEach(name => {
            let score = playerScores[name];
            score.totalGames++;

            // ä¸¥æ ¼åŸºäº outcome æ•°ç»„æ¥æ›´æ–°åˆ†æ•°ï¼Œä¸ç©å®¶åœ¨ players æ•°ç»„ä¸­çš„é¡ºåºæ— å…³
            if (outcome.winner.includes(name)) {
                score.wins++;
                score.winStreak++;
                score.loseStreak = 0;
            } else if (outcome.loser.includes(name)) {
                score.losses++;
                score.loseStreak++;
                score.winStreak = 0;
            } else if (outcome.draw.includes(name)) {
                score.draws++;
                score.winStreak = 0;
                score.loseStreak = 0;
            }
        });
        
        // æ˜¾ç¤ºç»“æœ
        displayRoundResult(playerMoves, outcome, players.length);
        
        // æ›´æ–°å†å²è®°å½•å’Œæ’å
        roundHistory.unshift({ round: roundHistory.length + 1, playerMoves: playerMoves, outcome: outcome, timestamp: new Date().toLocaleTimeString() });
        if (roundHistory.length > 5) roundHistory.pop(); 
        
        updateRoundHistory();
        updatePlayersList(); 
        updateRankings();
    }

    function displayRoundResult(playerMoves, outcome, playerCount) {
        const resultDiv = document.getElementById('current-round-result');
        let html = `<h4>å›åˆç»“æœ (${new Date().toLocaleTimeString()})</h4>`;
        
        html += '<p><strong>å‡ºæ‹³è¯¦æƒ…:</strong></p>';
        for (const name in playerMoves) {
            const move = playerMoves[name];
            let status = '';
            if (outcome.winner.includes(name)) status = '<span class="winner"> (èƒœ) </span>';
            else if (outcome.loser.includes(name)) status = '<span class="loser"> (è´¥) </span>';
            else if (outcome.draw.includes(name)) status = '<span class="draw"> (å¹³) </span>';

            html += `<p class="player-move">${name}: ${move.name} <span class="emoji-big">${move.emoji}</span> ${status}</p>`;
        }

        html += '<div style="margin-top: 15px;">';
        if (outcome.winner.length > 0) {
            html += `<p class="winner">ğŸ‘‘ æœ¬å±€èµ¢å®¶: ${outcome.winner.join(', ')}</p>`;
        }
        if (outcome.loser.length > 0) {
            html += `<p class="loser">ğŸ’€ æœ¬å±€è¾“å®¶: ${outcome.loser.join(', ')}</p>`;
        }
        if (outcome.draw.length > 0 && playerCount > 2) {
             html += `<p class="draw">ğŸ¤ å¹³å±€ç©å®¶: ${outcome.draw.join(', ')}</p>`;
        } else if (outcome.draw.length > 0 && playerCount == 2) {
            html += `<p class="draw">ğŸ¤ åŒæ–¹å¹³å±€ï¼</p>`;
        }
        html += '</div>';

        resultDiv.innerHTML = html;
    }

    function updateRoundHistory() {
        const historyDiv = document.getElementById('round-history');
        if (roundHistory.length === 0) {
            historyDiv.innerHTML = '<p class="no-players-message">æ— å†å²è®°å½•</p>';
            return;
        }

        historyDiv.innerHTML = roundHistory.map(round => {
            const players = Object.keys(round.playerMoves);
            let summary = players.map(name => {
                const move = round.playerMoves[name];
                let statusClass = '';
                if (round.outcome.winner.includes(name)) statusClass = 'winner';
                else if (round.outcome.loser.includes(name)) statusClass = 'loser';
                else if (round.outcome.draw.includes(name)) statusClass = 'draw';
                
                return `<span class="${statusClass}">${name} <span class="emoji-big" style="font-size: 1.2em;">${move.emoji}</span></span>`;
            }).join(' | ');

            return `
                <div class="round-result">
                    <p><strong>å±€æ•° #${round.round}</strong> (${round.timestamp})</p>
                    <p style="font-size: 0.95em;">${summary}</p>
                </div>
            `;
        }).join('');
    }


    // --- æ’åç³»ç»Ÿ ---
    function updateRankings() {
        const scoresArray = allPlayerNames.map(name => ({
            name,
            ...playerScores[name]
        })).filter(p => p.totalGames > 0); 

        if (scoresArray.length === 0) {
            document.getElementById('winner-ranking').innerHTML = document.getElementById('loser-ranking').innerHTML = 
            document.getElementById('streak-winner-ranking').innerHTML = document.getElementById('streak-loser-ranking').innerHTML = '<p class="no-rank-message">æš‚æ— æ’å</p>';
            return;
        }

        // 1. ç‹è€…æ¦œ (Wins)
        scoresArray.sort((a, b) => b.wins - a.wins);
        displayRanking('winner-ranking', scoresArray, (p) => `${p.wins} èƒœ`);

        // 2. å†¤ç§æ¦œ (Losses)
        scoresArray.sort((a, b) => b.losses - a.losses);
        displayRanking('loser-ranking', scoresArray, (p) => `${p.losses} è´¥`);
        
        // 3. è¿èƒœç‹ (Win Streak)
        scoresArray.sort((a, b) => b.winStreak - a.winStreak);
        displayRanking('streak-winner-ranking', scoresArray, (p) => `${p.winStreak} è¿èƒœ`);
        
        // 4. è¿è´¥ç‹ (Lose Streak)
        scoresArray.sort((a, b) => b.loseStreak - a.loseStreak);
        displayRanking('streak-loser-ranking', scoresArray, (p) => `${p.loseStreak} è¿è´¥`);
    }

    function displayRanking(elementId, sortedScores, scoreFormatter) {
        const rankingDiv = document.getElementById(elementId);
        
        // æ˜¾ç¤ºæ‰€æœ‰ç©å®¶
        const html = sortedScores.map((player, index) => { 
            const scoreText = scoreFormatter(player);
            return `
                <div class="ranking-item">
                    <span class="rank-name">${index + 1}. ${player.name}</span>
                    <span class="rank-score">${scoreText}</span>
                </div>
            `;
        }).join('');
        rankingDiv.innerHTML = html;
    }

    // é¡µé¢åŠ è½½æ—¶çš„åˆå§‹åŒ–
    window.onload = function() {
        updatePlayersList();
        updateActivePlayersSelection();
        updateRankings();
        updateRoundHistory();
    };
</script>
</body>
</html>
